(function(h,p){typeof exports=="object"&&typeof module!="undefined"?p(require("react")):typeof define=="function"&&define.amd?define(["react"],p):(h=typeof globalThis!="undefined"?globalThis:h||self,p(h.React))})(this,function(h){"use strict";function p(e){return e&&typeof e=="object"&&"default"in e?e:{default:e}}var l=p(h);const b=window.open("","_blank","width=800, height=780, toolbar=1"),y=b.document;y.write(`
<html>
<head>
<title>Zoom\u81EA\u52D5\u7B49\u5019\u5BA4\u5916\u639B</title>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
</head>
<body>
<div id="root"></div>
</body>
</html>
`);const S=y.body,O=y.querySelector("#root"),w=window,v=w.document;function _(e){const t=new MouseEvent("mouseover",{bubbles:!0,cancelable:!1});e.dispatchEvent(t)}function R(){return[...v.querySelectorAll(".waiting-room-list-conatiner .participants-li")].map(t=>({name:t.querySelector(".participants-item__display-name").textContent,allow:A(t)}))}function A(e){return()=>{_(e),setTimeout(()=>{e.querySelector(".participants-item__right-section button.btn-primary").click()},10)}}function B(){return v.querySelector(".participants-section-container")?!0:(v.querySelector(".footer-button__participants-icon").parentElement.parentElement.click(),!!v.querySelector(".participants-section-container"))}var C={exports:{}},g={};/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var j=Object.getOwnPropertySymbols,F=Object.prototype.hasOwnProperty,D=Object.prototype.propertyIsEnumerable;function P(e){if(e==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}function q(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de",Object.getOwnPropertyNames(e)[0]==="5")return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;var o=Object.getOwnPropertyNames(t).map(function(a){return t[a]});if(o.join("")!=="0123456789")return!1;var c={};return"abcdefghijklmnopqrst".split("").forEach(function(a){c[a]=a}),Object.keys(Object.assign({},c)).join("")==="abcdefghijklmnopqrst"}catch(a){return!1}}q();/** @license React v17.0.2
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var L=l.default,k=60103;if(g.Fragment=60107,typeof Symbol=="function"&&Symbol.for){var x=Symbol.for;k=x("react.element"),g.Fragment=x("react.fragment")}var T=L.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,W=Object.prototype.hasOwnProperty,I={key:!0,ref:!0,__self:!0,__source:!0};function N(e,t,n){var o,c={},a=null,i=null;n!==void 0&&(a=""+n),t.key!==void 0&&(a=""+t.key),t.ref!==void 0&&(i=t.ref);for(o in t)W.call(t,o)&&!I.hasOwnProperty(o)&&(c[o]=t[o]);if(e&&e.defaultProps)for(o in t=e.defaultProps,t)c[o]===void 0&&(c[o]=t[o]);return{$$typeof:k,type:e,key:a,ref:i,props:c,_owner:T.current}}g.jsx=N,g.jsxs=N,C.exports=g;const r=C.exports.jsx,d=C.exports.jsxs;function $({names:e,onSave:t,onClose:n}){const[o,c]=React.useState(e.join(`
`)),a=React.useCallback(s=>{c(s.target.value)},[c]),i=()=>{const s=new Set(o.split(`
`).map(m=>m.trim()).filter(m=>m));t([...s])};return ReactDOM.createPortal(r("div",{className:"modal fade show d-block",tabindex:"-1",role:"dialog","aria-hidden":"true",children:r("div",{className:"modal-dialog modal-dialog-centered",role:"document",children:d("div",{className:"modal-content",children:[r("div",{className:"modal-header",children:r("h5",{className:"modal-title",children:"\u7DE8\u8F2F\u5141\u8A31\u540D\u55AE"})}),r("div",{className:"modal-body",children:r("textarea",{className:"form-control w-100",rows:10,value:o,onChange:a})}),d("div",{className:"modal-footer",children:[r("button",{type:"submit",className:"btn btn-primary",onClick:i,children:"\u5132\u5B58"}),r("button",{className:"btn btn-secondary",onClick:n,children:"\u53D6\u6D88"})]})]})})}),S)}function U({onChange:e=t=>{}}){const[t,n]=React.useState([]),[o,c]=React.useState(!1);return d("div",{className:"px-3 d-flex flex-column h-100",children:[r("button",{className:"btn btn-primary mb-2",onClick:()=>c(!0),children:"\u7DE8\u8F2F\u5141\u8A31\u540D\u55AE"}),d("ul",{className:"list-group flex-grow-1 overflow-auto",children:[t.map(a=>r("li",{className:"list-group-item",children:a},a)),t.length===0&&r("li",{className:"list-group-item",children:"\u7A7A\u767D\u7684\u5141\u8A31\u6E05\u55AE"})]}),o&&r($,{names:t,onSave:a=>{n(a),c(!1),e(a)},onClose:()=>c(!1)})]})}function M({logs:e}){const t=l.default.useRef(null);return l.default.useEffect(()=>{t.current&&(t.current.scrollTop=t.current.scrollHeight)},[e]),r("div",{ref:t,style:{whiteSpace:"pre-wrap"},className:"h-100 overflow-auto card",children:r("div",{className:"card-body",children:e.map(n=>d("div",{className:`alert alert-${n.type||"light"}`,children:[r("strong",{children:r("time",{children:n.time.toLocaleTimeString()})})," ",r("span",{children:n.message})]},+n.time))})})}function Z(){const[e,t]=l.default.useState([]),n=l.default.useCallback((u,E)=>t(f=>[...f,{time:new Date,message:u,type:E}]),[t]),o=l.default.useRef([]),c=l.default.useCallback(u=>{o.current=u,n(`\u66F4\u65B0\u5141\u8A31\u540D\u55AE
`+u.join(`
`))},[n]),a=l.default.useRef([]),i=l.default.useRef(!1),s=l.default.useCallback(u=>{i.current=u.target.checked,n(`${u.target.checked?"\u958B\u59CB":"\u505C\u6B62"}\u5075\u6E2C\u7B49\u5019\u5BA4`,"info")},[n]),m=l.default.useRef(!0),V=l.default.useCallback(u=>{m.current=u.target.checked,n(`${u.target.checked?"\u958B\u555F":"\u95DC\u9589"}\u56B4\u683C\u6A21\u5F0F`,"info")},[]);return l.default.useEffect(()=>{const u=b.setInterval(()=>{if(!i.current)return;B();const E=R();for(const f of E)(m.current?o.current.includes(f.name):o.current.some(H=>new RegExp(H).test(f.name)))?(console.debug(o.current,f.name),f.allow(),n(`\u5141\u8A31\u52A0\u5165\uFF1A${f.name}`,"success")):a.current.includes(f.name)||(n(`\u672A\u6388\u6B0A\uFF1A${f.name}`,"danger"),a.current.push(f.name))},5e3);b.onbeforeunload=()=>b.clearInterval(u)},[]),d("div",{className:"d-flex flex-column vh-100 vw-100 p-3",children:[d("header",{className:"mb-3 d-flex",children:[d("div",{class:"form-check mx-3",children:[r("input",{class:"form-check-input",type:"checkbox",id:"detect",defaultChecked:!1,onChange:s}),r("label",{class:"form-check-label",for:"detect",children:"\u5075\u6E2C\u7B49\u5019\u5BA4"})]}),d("div",{class:"form-check mx-3",children:[r("input",{class:"form-check-input",type:"checkbox",id:"strictCompare",defaultChecked:!0,onChange:V}),r("label",{class:"form-check-label",for:"strictCompare",children:"\u56B4\u683C\u6A21\u5F0F"})]})]}),d("main",{className:"d-flex flex-grow-1 conatiner-fluid overflow-hidden",children:[r("div",{className:"col-12 col-md-4 h-100",children:r(U,{onChange:c})}),r("div",{className:"col-12 col-md-8 h-100",children:r(M,{logs:e})})]})]})}ReactDOM.render(r(React.StrictMode,{children:r(Z,{})}),O),w.addEventListener("beforeunload",e=>(e.returnValue="\u4F60\u78BA\u5B9A\u8981\u95DC\u9589Zoom\u6703\u8B70\u55CE\uFF1F",e.preventDefault(),!0)),w.addEventListener("unload",()=>{b.close()})});
